
---
title: "CodeBook.md"
author: "B.S. Comer"
date: "06/20/2015"
output: html_document
---

#Codebook for run_analysis.R

##Function of run_analysis.R: 
To generate a tidy data set containing mean and standard deviation variables 
Human Activity Recognition Data set available from the University of California
Irvine Machine Learning Repository. Final data set is mean_results_summary. 
Mean_results_summary contains averages of mean and standard deviation variables by 
subject and activity.  Exported text file contains mean_results_summary data table and is
labeled tidy_data.txt in the working directory.

##R Version: 3.2.1 (2015-06-18)

##Data Source URL: 
<https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip> 

##Additional information on data available at the following url: 

<http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones> 

##Additional information also provided in readme.txt provided with the original data set from UCI.

##Brief Description of the Data:
Data recorded by embedded accelerometers (3-axial linear acceleration) and 
gyroscopes (3-axial angular velocity) in smartphones (Samsung Galaxy S II) worn 
on the the waist by 30 subjects (age range 19-48 years old) performing six 
activities (WALKING, WALKING_UPSTAIRS, WALKING_DOWNSTAIRS, SITTING, STANDING, 
LAYING).  The source data was provided randomly divided into two subsets: 
Training data (70% of data) and Test data (30% of data). Data provided from 
source includes the raw data and processed data. Data were processed as 
described feature_info.txt, which is provided with the original data set.  Raw 
inertia data is provided in subdirectories in 
/UCI HAR Dataset/test/Inertia Signals and /UCI Har Dataset/train/Inertia Signals
but this is not required for run_analysis.R data transformation.  

###### Note: Data features were normalized and bounded within [-1,1] in the source data set.

##Required data directory structure:
Source data must be downloaded and extracted as provided into the working 
directory of R.  Required folder structure (in Unix directory format):

./UCI HAR Dataset/
./UCI HAR Dataset/test
./UCI HAR Dataset/train

##Required Packages:
"gtools"
"dplyr"


##Variables:
Variables are estimates of the the following signals:

- tBodyAcc-XYZ
- tGravityAcc-XYZ
- tBodyAccJerk-XYZ
- tBodyGyro-XYZ
- tBodyGyroJerk-XYZ
- tBodyAccMag
- tGravityAccMag
- tBodyAccJerkMag
- tBodyGyroMag
- tBodyGyroJerkMag
- fBodyAcc-XYZ
- fBodyAccJerk-XYZ
- fBodyGyro-XYZ
- fBodyAccMag
- fBodyAccJerkMag
- fBodyGyroMag
- fBodyGyroJerkMag

Two prefixes are used in labels: 

- "t-" denotes a time domain signal
- "f-" denotes a frequency domain signal

Variables in final data set, mean_results_summary, are means of either mean or standard deviation(std) for each subject and activity as indicated by column label in clean_data.  clean_data contains the subset of mean and standard deviations (std) contained in the original data set.


##Variables included in source data are listed below:

Note: Variables were named using the following scheme: 

* signal prefix-descriptive statistic stem-directional suffix (when appropriate)

An example of a variable name is as follows: 

* "tBodyAcc-mean()-X" in original data set 
* "tBodyAcc.mean().X" in data table generated by run_analysis.R.

- mean(): Mean value
- std(): Standard deviation
- mad(): Median absolute deviation 
- max(): Largest value in array
- min(): Smallest value in array
- sma(): Signal magnitude area
- energy(): Energy measure. Sum of the squares divided by the number of values. 
- iqr(): Interquartile range 
- entropy(): Signal entropy
- arCoeff(): Autorregresion coefficients with Burg order equal to 4
- correlation(): correlation coefficient between two signals
- maxInds(): index of the frequency component with largest magnitude
- meanFreq(): Weighted average of the frequency components to obtain a mean 
- frequency

- skewness(): skewness of the frequency domain signal 
- kurtosis(): kurtosis of the frequency domain signal 
- bandsEnergy(): Energy of a frequency interval within the 64 bins of the FFT of each window.
- angle(): Angle between to vectors.

Note: These descriptions were exported from the description files provided
with the original data set.All original variables were not included in the data 
table generated by run_analysis.R.  Final data table only includes mean() and 
std() variables.

##Transformations:

1. Reading data (measurements, variable information, subject information, and 
activity information) into R from working directory and merging training and test sets.
 - Data read into R using read.table()
 	- X_train<-training data set
        - subject_train<-training set subject information
        - y_train<-training set activity information
        - X_test<-test data set
        - subject_test<-test set subject information
        - y_test<-test set activity information
 - Data tables merged using rbind()
        - merged_data<- Merged training and test data sets
        - merged_subject<- Merged training and test set subject information
        - merged_activity <- Merged training and test set activity information
2. Extracting mean and standard deviation measurements. 
 * Note: Requires package "gtools"
 - Generate index of columns containing mean and standard deviations
 	- grep() to index columns containing "mean()" as mean_index
 	- grep() to index columns containing "std()" as std_index
 	- mixedsort() - (from gtools package) to concatenate mean_index
			and std_index as feature_index
 - Subset mean and std columns using feature_index as indexing reference
 	- Yields mean_std_subset data table
3. Add descriptive data labels to data table and labels data set appropriately
 - Add empty second column for activity labels to merged_activity index 
        table
 - Add activity labels to merged_activity index table in column 2
 - Use cbind() to merge column 2 from merged_activity with mean_std_subset
 	- Yields activities_mean_std_subset table
 - Use colnames() to subset column names as good_syntax
 - Use make.names() to correct syntax in good_syntax
 - Create index of activity labels from dataset_features called 
                indexed_activity_label
 - Create a vector called activity_label_index_vector of descriptive 	
                activity labels using as.vector() and indexed_activity_label 
                column 2 
 - Added "Activity" label to head of activity_label_index_vector using 
                c() and named resulting vector updated_activity_label_index_vector
 - Used colnames() and updated_activity_label_index_vector to rename 		
                columns with descriptive labels for activities and statistic 
                variable labels
 - Used cbind() to merge subject information to data table called 		
                clean_data containing activities and statistic variable labels 			
                using merged_subject index and activities_mean_std_subset data 		
                table.
 - Add heading "Subject" to column V1 of clean_data using colNames().
4. Generate data table with average of each variable and each subject and export that data table as the text             file tidy_data.txt in working directory. 
 * Note requires package "dplyr"
 
 - Use ddplyr to split the data table by the variables "subject" and "activity", and apply the         
                function numcolwise(mean) to generate mean_results_summary
 - Use write.table() to export mean_results_summary as tidy_data.txt in working directory
  	- row.names=FALSE
  	- sep = " " is default argument and thus not listed in code
 - Use view() to output data table to R for researcher to view on screen.
	
	










